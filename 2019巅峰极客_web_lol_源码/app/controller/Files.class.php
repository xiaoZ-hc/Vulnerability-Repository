<?php
class Files{
    public $file_dir;
    public $file;

    function __construct($data){

        $this->file=$data;
        $this->file_dir=Upload_DIR.DS.session_id().'.jpg';
        $this->upload();
    }

    function upload(){

        if ( isset($this->file['file']) && $this->file['file']['error']==0 ){
            move_uploaded_file($this->file["file"]["tmp_name"],$this->file_dir)?$this->file_dir='/upload'.DS.session_id().DS.session_id().'.jpg':'';
        }else{
            $this->file_dir='';
        }
    }
};